Project web_spat {
  database_type: 'MariaDB'
  Note: 'web spat'
}

// Table user {
//   id int [pk, increment]
//   sex char(1) [not null, default: '0'] //ISO5218
//   deaf_and_hearing_impaired bool [not null]
//   created_at timestamp [not null, default: `now()`]
//   updated_at timestamp
// }


// result, NormCDF
Table result_movement_direction_discrimination_constant_width {
  id int [pk, increment]
  experiment_id int [not null, ref: > experiment.id]
  result_url text [not null]
  subject_id int [not null, ref: > subject.id]
  mean double [not null]
  sd double [not null]
  lower_asymptote double [not null]
  lapse_rate double [not null]
  created_at timestamp [not null, default: `now()`]
}

// // result, NormCDF
// Table result_movement_direction_discrimination_constant_velocity {
//   id int [pk, increment]
//   experiment_id int [not null, ref: > EMW.id]
//   questplus_parameter_normcdf_id int [not null, ref: > questplus_parameter_normcdf.id]
//   mean double [not null]
//   sd double [not null]
//   lower_asymptote double [not null]
//   lapse_rate double [not null]
// }

Table experiment {
  id int [pk, increment]
  created_at timestamp [not null, default: `now()`]
}

Table experiment_active {
  id int [pk, increment]
  experiment_id int [not null, unique, ref: - experiment.id]
  created_at timestamp [not null, default: `now()`]
}

Table experiment_inactive {
  id int [pk, increment]
  experiment_id int [not null, unique, ref: - experiment.id]
  created_at timestamp [not null, default: `now()`]
}

Table experiment_movement_direction_discrimination_constant_width{
  id int [pk, increment]
  experiment_id int [not null, unique, ref: - experiment.id]
  questplus_parameter_normcdf_id int [not null, ref: > questplus_parameter_normcdf.id]
  name string [not null, unique]
  description string [not null]
  azimuth int [not null, note:'0[10^-1 deg] is the front, 900[10^-1 deg] is the right side']
  altitude int [not null, note:'0[10^-1 deg] is the front, 900[10^-1 deg] is the zenith, -900[10^-1 deg] is the nadir']
  coordinate_variable_id int [not null, ref: > m_coordinate_variable.id]
  width int [not null, note: '[10^-1 deg]']
  velocity_range_lower int [not null, note: '[10^-1 deg/sec]']
  velocity_range_upper int [not null, note: '[10^-1 deg/sec]']
  velocity_range_step int [not null, note: '[10^-1 deg/sec]']
  num_trials int [not null]
  created_at timestamp [not null, default: `now()`]
}

// Table experiment_movement_direction_discrimination_constant_velocity as EMV{
//   id int [pk, increment]
//   name string [not null, unique]
//   description string [not null]
//   azimuth int [not null, note:'0[10^-1 deg] is the front, 900[10^-1 deg] is the right side']
//   altitude int [not null, note:'0[10^-1 deg] is the front, 900[10^-1 deg] is the zenith, -900[10^-1 deg] is the nadir']
//   coordinate_variable_id int [not null, ref: > m_coordinate_variable.id]
//   velocity int [not null, note: '[10^-1 deg/sec]']
//   width_range_lower int [not null, note: '[10^-1 deg]']
//   width_range_upper int [not null, note: '[10^-1 deg]']
//   width_range_step int [not null, note: '[10^-1 deg]']
//   num_trials int [not null]
//   created_at timestamp [not null, default: `now()`]
// }

Table questplus_parameter_normcdf {
  id int [pk, increment]
  questplus_parameter_json_url text [not null]
  created_at timestamp [not null, default: `now()`]
}

Table m_coordinate_variable {
  id int [pk]
  type varchar(64) [not null, note: 'azimuth or altitude'] 
  created_at timestamp [not null, default: `now()`]
}

Table subject {
  id int [pk]
  sex char(1) [not null, default: '0', note: 'ISO5218']
  age int [not null]
  deaf_and_hearing_impaired bool [not null]
  created_at timestamp [not null, default: `now()`]
}

